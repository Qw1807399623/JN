"use strict";function base64encode(e){{var t,c,i,n,a,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)}for(i=e.length,c=0,t="";i>c;){if(n=255&e.charCodeAt(c++),c==i){t+=o.charAt(n>>2),t+=o.charAt((3&n)<<4),t+="==";break}if(a=e.charCodeAt(c++),c==i){t+=o.charAt(n>>2),t+=o.charAt((3&n)<<4|(240&a)>>4),t+=o.charAt((15&a)<<2),t+="=";break}s=e.charCodeAt(c++),t+=o.charAt(n>>2),t+=o.charAt((3&n)<<4|(240&a)>>4),t+=o.charAt((15&a)<<2|(192&s)>>6),t+=o.charAt(63&s)}return t}var picCheck={init:function(e){var t=this,c="http://"+(/test/.test(location.href)?"test.":"")+"www.guopan.cn/checkimg",i={secret:"GP#*FJD23fP2SWe5)%bR37K",key:"GPWebRegKey",t:new Date/1,oper:"gd"},n=$.Deferred();i=$.extend(i,{sign:Sign.init(i)}),i=base64encode(JSON.stringify(i));var a=new Image,s=0,o=0;a.src=c+"?v="+new Date/1,a.onload=function(){s=this.width,o=this.height,$.post(c,{cipherdata:i},function(e){0==e.code?n.resolve(e.data):n.reject(e)},"json")},n.done(function(i){var n=i.join('" "');t.hasload?(e.find(".check-img").html(a),e.find(".check-msg").html('>>>请依次点击 "'+n+'"完成验证>>>')):(e.append('<div class="check-img"></div><div class="check-msg">>>>请依次点击 "'+n+'"完成验证>>></div>'),e.find(".check-img").html(a),t.hasload=!0);var h=0,r=[];e.find(".check-img").off("click").on("click",function(i){h++;var n=$(this).width(),a=$(this).height(),d=i.pageX-$(this).offset().left,g=i.pageY-$(this).offset().top,f=s*d/n,l=o*g/a;console.log("x:"+f+"y:"+l);var p="http://cdn2.guopan.cn/frontend/pc/static/img/click_18ac71a.png";if(3>=h&&(r.push({x:f,y:l}),$(this).append('<img src="'+p+'" style="left:'+(d-10)+"px;top:"+(g-10)+'px;width:20px;height:20px;" class="click-img">')),3==h){console.log(r);var k={secret:"GP#*FJD23fP2SWe5)%bR37K",key:"GPWebRegKey",t:new Date/1,oper:"ck",dot:JSON.stringify(r)};k=$.extend(k,{sign:Sign.init(k)}),console.log(k),k=base64encode(JSON.stringify(k)),$.post(c,{cipherdata:k},function(c){0==c.code?(e.find(".check-msg").html('<span style="color:green;">验证成功</span>'),t.checked=!0):(e.find(".check-msg").html('<span style="color:red;">验证失败</span>'),setTimeout(function(){t.init(e)},500))},"json")}})})},hasload:!1,checked:!1};