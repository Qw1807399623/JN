$(function(){var n=$("#scrollContainer");n.length>0&&syncScroll($("#scrollContainer"))}),window.getZoneGift=function(n,o){$.ajax({type:"get",url:n,timeout:3e3,dataType:"json"}).done(function(n){o(n)}).fail(function(n){console.log(n)})},window.loadDefaultIcon=function(n){$(n).attr("src","http://www.guopan.cn/huodong/0424/mobile/img/defaultIcon.png"),n.onerror=null};
;define("gpgame:widget/zone/gameComment/gameComment.js",function(){"use strict";$(document).ready(function(){function e(e){r.css("width",24*(e+1))}function a(e){aalert("亲，你已经给玩家评分为: "+(e+1))}function t(e,a){$.ajax({type:"get",url:gpID.api.getComment,dataType:"json",data:"special_name="+e+"&p="+a+"&class=active&nocache=1",success:function(e){var a=$(".comment-hm");if(null==e.datas||void 0==e.datas)return void a.html('<p style="text-align:center; padding:20px 0 10px; color:#999;">暂无评论</p>');var t="";a.html(""),t+='<div class="commlist">';for(var o=0;o<e.datas.length;o++){var s=e.datas[o].content;s.length>200&&(s=s.substr(0,200)+"..."),t+='<div class="commlist_item">',t+='<div class="commtoux"><a href="http://www.guopan.cn/xiaozu/i'+e.datas[o].uin+'/" target="_blank"><img src="'+e.datas[o].uico+'" onerror="loadDefaultIcon(this)" /></a></div>',t+='<p class="comm-title"><span class="comm-name"><a href="http://www.guopan.cn/xiaozu/i'+e.datas[o].uin+'/" target="_blank">'+e.datas[o].uname+'</a></span><span class="comm-time">'+e.datas[o].create_time+"</span></p>",t+='<p class="commart">'+s+"</p>",t+="</div>"}t+="</div>",1!==e.num&&(t+='<div class="commMore"><span>点击查看更多评论<img src="http://cdn2.guopan.cn/frontend/pc/static/img/loading_b494fce.gif"></span></div>'),a.append(t),n(e)}})}function o(e,a){$.ajax({type:"get",url:"http://www.guopan.cn/dede/get_comment.php",dataType:"json",data:"special_name="+e+"&p="+a+"&class=active",success:function(e){for(var a=$(".commlist"),t="",o=0;o<e.datas.length;o++)t+='<div class="commlist_item">',t+='<div class="commtoux"><a href="http://www.guopan.cn/xiaozu/i'+e.datas[o].uin+'/" target="_blank"><img src="'+e.datas[o].uico+'" /></a></div>',t+='<p class="comm-title"><span class="comm-name"><a href="http://www.guopan.cn/xiaozu/i'+e.datas[o].uin+'/" target="_blank">'+e.datas[o].uname+'</a></span><span class="comm-time">'+e.datas[o].create_time+"</span></p>",t+='<p class="commart">'+e.datas[o].content+"</p>",t+="</div>";a.append(t)},complete:function(){$(".commMore").removeClass("active")}})}function s(){void 0!=$.cookie("rememberLoginUserName")&&($("#loginUser").val($.cookie("rememberLoginUserName")),void 0!=$.cookie("rememberLoginUserPass")&&$("#loginPsw").val($.cookie("rememberLoginUserPass")))}function n(e){$(".comment-hm").on("click",".commMore:not(.active)",function(){$(this).addClass("active"),v++,v==e.num&&$(this).hide(),o(u,v)})}var c,i=$(".star-box"),r=i.find(".starHover"),m=i.find(".starList"),l=m.children("li"),p=$(".precentNums"),d=($(".scoreStar").find(".precentNums").data("num"),$(".tipContent").children("span")),u=$(".zone").data("special"),g=pop.checkLoginSpecial(u),v=1;c=$.cookie("uid")?$.cookie("uid"):0;var h=u+"_starScore",f="specialName",x=new Date;x.setTime(x.getTime()+864e5),$.cookie(f,u,{path:"/",expires:x}),g.then(function(t){var o=t.scoreinfo,s=$(".precentValue").find("span"),n=$(".precentNumber");if(o){$(".scoreValue").html(o.score.average),p.css("width",o.score.average/5*100+5*Math.floor(o.score.average)+"px");for(var i=0;i<o.score.scoreList.length;i++)s.eq(i).css({width:o.score.scoreList[i][0]}),n.eq(i).html(o.score.scoreList[i][0])}$.cookie(h)&&$.cookie(f)==u?(e($.cookie(h)-1),0==$(".haveFen").length&&$(".setScore").append('<span class="haveFen">你已经评过分</span>'),l.off("mouseover")):l.on("mouseover",function(){var a=l.index(this);e(a)}).mouseout(function(){e(-1)}).on("click",function(){var t=($(this),l.index(this)),o=t+1;$.cookie(h)?(aalert("您已经评过分了!"),0==$(".haveFen").length&&$(".setScore").append('<span class="haveFen">你已经评过分</span>')):$.ajax({type:"get",url:gpID.api.comment,dataType:"json",data:"ajax=score&special="+u+"&uin="+c+"&star="+o,success:function(c){var i=c.scoreinfo;if($.cookie(h,o,{path:"/",expires:x}),0==c.code){a(t),e(t),$(".scoreValue").html(i.score.average),p.css("width",i.score.average/5*100+5*Math.floor(i.score.average)+"px");for(var r=0;r<i.score.scoreList.length;r++)s.eq(r).css({width:i.score.scoreList[r][0]}),n.eq(r).html(i.score.scoreList[r][0]);l.off("mouseover"),l.off("mouseout")}else aalert(c.msg),e(-1),l.off("mouseover")}})})}),d.on("click",function(e){$(e.target).toggleClass("active")}),$(".gComment-btn .btns").on("click",function(){var e=$.cookie("uid");if(!e)return pop.globalPopup("#loginModal",s);for(var a=[],o=$(".tipContent").find("span"),n=0;n<o.length;n++)o.eq(n).hasClass("active")&&a.push(o.eq(n).text());var c=$.trim($(".commtext").val());return""==c&&0==a.length?(aalert("评论不能为空!"),!1):($(".commtext").on("keyup",function(){$(".commtext").val().trim().length>200&&aalert("评论内容最多为200个字")}),void $.ajax({type:"get",url:gpID.api.comment,dataType:"json",data:{special:u,content:a.join(" ")+c,commentid:0,nocache:1},success:function(e){1==e.code?($(".commtext").val(""),t(u,1)):0==e.code&&aalert(e.msg)}}))}),t(u,1)})});
;define("gpgame:widget/zone/debate/debate.js",function(e){function t(){var e=$(".pk-data-wrap").width()-$(".pk-data-wrap .pk-icon").width(),t=$(".pk-data-wrap .pros-vote"),a=$(".pk-data-wrap .cons-vote"),o=parseInt(t.text()),n=parseInt(a.text());0==o&&0==n&&(o=1,n=1);var i=0;i=parseInt(o/(o+n)*e),100>=i&&(i=100),100>=e-i&&(i=e-100),t.width(i+"px"),a.width(e-i+"px")}function a(){void 0!=$.cookie("rememberLoginUserName")&&($("#loginUser").val($.cookie("rememberLoginUserName")),void 0!=$.cookie("rememberLoginUserPass")&&$("#loginPsw").val($.cookie("rememberLoginUserPass")))}function o(e,t,o){if(!t)return m("回复内容不能为空");var n=$.cookie("uid");if(!n)return p.globalPopup("#loginModal",a);var i=gpID.api.commentZiXun+"?ajax=add&app_id=2&uin="+n+"&content="+t+"&type="+o+"&id="+e;$.get(i,function(t){if("string"==typeof t&&(t=JSON.parse(t)),0==t.code){{(new Date).getTime()}r(e,o,1)}else m(t.msg);1==o?$("#prosCommentArea").val(""):$("#consCommentArea").val("")})}function n(e){$.get(gpID.api.commentZiXun+"?ajax=getvote&id="+e,function(e){if("string"==typeof e&&(e=JSON.parse(e)),0==e.code){var a=e.data.true_num,o=e.data.false_num;$(".pros-vote").text(a+"票"),$(".cons-vote").text(o+"票"),t()}else 1!=e.code&&m(e.msg)})}function i(e,o){var n=$.cookie("uid"),i=$(".pros-vote"),r=$(".cons-vote");if(!n)return p.globalPopup("#loginModal",a);var s=gpID.api.commentZiXun+"?ajax=vote&id="+e+"&type="+o+"&uin="+n;$.get(s,function(e){if(console.log("vote data: ",e),"string"==typeof e&&(e=JSON.parse(e)),0==e.code){m("投票成功"),console.log("vote for "+o+" success");var a=(new Date).getTime();$.cookie("vote"+n,a,{expires:1});var s=0;1==o?(s=parseInt(i.text())+1,i.text(s+"票")):(s=parseInt(r.text())+1,r.text(s+"票")),t()}else m(e.msg)})}function r(e,t,a){var o=gpID.api.commentZiXun+"?ajax=getlist&app_id=2&type="+t+"&id="+e+"&p="+a;$.get(o,function(a){if("string"==typeof a&&(a=JSON.parse(a)),console.log("commentList: ",a),0!=a.code)return 1!=a.code?m(a.msg):null;var o=a.data;s(t,o);var n=a.page;c(e,t,n)})}function s(e,t){var a=$(1==e?"#prosCommentList":"#consCommentList");if(!t||0==t.length)return a.addClass("hide");a.removeClass("hide");for(var o="",n=0;n<t.length;n++){var i=0==n?"first":"",r=t[n],s=r.content;s.length>=200&&(s=s.substr(0,198)+"...");var c="http://guopan.cn/xiaozu/i"+r.uin+"/";o+='<div class="commlist_item '+i+'">',o+='<div class="commtoux">',o+='<a href="'+c+'" target="_blank">',o+='<img src="'+r.uico+'"></a>',o+="</div>",o+='<p class="comm-title">',o+='<span class="comm-name"><a href="'+c+'" target="_blank">'+r.uname+"</a></span>",o+='<span class="comm-time">'+r.create_time+"</span>",o+="</p>",o+='<p class="commart">'+s+"</p>",o+="</div>"}a.html(o)}function c(e,t,a){var o=$(1==t?"#prosPagination":"#consPagination");if(!a||0==a.length)return o.addClass("hide");o.removeClass("hide");for(var n="",i=0;i<a.length;i++){var s=a[i],c=s.href.match(/\&p=(\d+)$/);c=null==c?1:parseInt(c[1]);var m=s.active?"active":"";n+='<a  class="'+m+'" data-page="'+c+'">'+s.html+"</a>"}o.html(n),o.find("a").on("click",function(){var a=$(this).attr("data-page");a=parseInt(a),r(e,t,a)})}var m=alert,p=p||{};$.extend(p,e("gpgame:widget/popupRoot/popupRoot.js")),$(function(){var e=$("#debateTitle").attr("data-id");n(e),$("#prosAddComment").click(function(){var t=$("#prosCommentArea").val().trim(),a=1;o(e,t,a)}),$("#consAddComment").click(function(){var t=$("#consCommentArea").val().trim(),a=2;o(e,t,a)}),$("#votePros").click(function(){i(e,1)}),$("#voteCons").click(function(){i(e,2)}),r(e,1,1),r(e,2,1),$("#prosCommentArea").on("keyup",function(){$("#prosCommentArea").val().trim().length>200&&m("评论内容最多为200个文字")}),$("#consCommentArea").on("keyup",function(){$("#consCommentArea").val().trim().length>200&&m("评论内容最多为200个文字")})})});